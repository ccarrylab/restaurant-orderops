apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: restaurant-api-pdb
spec:
  minAvailable: 2
  selector:
    matchLabels:
      app: restaurant-api
```

**Key Features:**
- **Minimum 2 pods** must always be available
- **Prevents** Kubernetes from draining/evicting too many pods at once
- **Protects** against voluntary disruptions (node maintenance, upgrades)

**What it does:**

âŒ **Without PDB:**
```
Node maintenance â†’ Kubernetes evicts all 3 pods â†’ ğŸ’¥ Service down!
```

âœ… **With PDB (minAvailable: 2):**
```
Node maintenance â†’ Kubernetes evicts 1 pod â†’ 2 pods still serving traffic
Wait for new pod â†’ Healthy â†’ Evict next pod â†’ Always 2+ running
```

---

## ğŸ¯ Interview Talking Points

### Ingress
- "I use AWS ALB instead of NGINX because it's managed - no need to maintain ingress controllers"
- "Target-type IP routes directly to pods, skipping the extra service hop - lower latency"
- "ALB automatically handles SSL termination and integrates with ACM for certificates"
- "Health checks ensure ALB only sends traffic to healthy pods"

### PDB
- "This is often forgotten but critical for production"
- "Without PDB, a cluster upgrade could evict all pods simultaneously"
- "minAvailable: 2 means we maintain at least 2 pods during any disruption"
- "During chaos testing, even if we kill pods, PDB ensures minimum availability"

---

## ğŸ“Š Real-World Scenario

**Dinner Rush + Node Maintenance:**
```
19:00 - Dinner rush starts
     â†’ HPA scales to 10 pods across 3 nodes
     
19:15 - Node1 needs maintenance
     â†’ PDB allows evicting pods from Node1
     â†’ But only after new pods are Ready on Node2/Node3
     â†’ minAvailable: 2 always maintained
     
19:20 - Node1 maintenance complete
     â†’ Pods redistribute
     â†’ Traffic continues uninterrupted
